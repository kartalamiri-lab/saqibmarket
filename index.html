<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SAQIB Messenger</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:#0f172a;
  color:#fff;
}
.hidden{display:none}
header{
  background:#020617;
  padding:14px;
  text-align:center;
  font-weight:bold;
}
.page{padding:14px}
input,button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:14px;
  font-size:15px;
}
input{background:#1e293b;color:#fff}
button{background:#2563eb;color:#fff;font-weight:600}
.user{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  border-bottom:1px solid #1e293b;
  cursor:pointer;
}
.user img{
  width:46px;height:46px;border-radius:50%;
}
.status{font-size:12px;color:#22c55e}
#messages{height:60vh;overflow:auto}
.msg{
  padding:10px 14px;
  border-radius:16px;
  margin:6px 0;
  max-width:75%;
}
.me{background:#2563eb;margin-left:auto}
.other{background:#1e293b}
.bottom{
  display:flex;
  gap:6px;
}
.bottom input{flex:1}
nav{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  background:#020617;
}
nav button{
  flex:1;
  background:#020617;
  border-radius:0;
}
nav button.active{background:#2563eb}
.story{
  display:flex;
  gap:10px;
  overflow-x:auto;
}
.story div{
  width:70px;
  text-align:center;
  font-size:12px;
}
.story img{
  width:60px;height:60px;border-radius:50%;
  border:2px solid #2563eb;
}
video{
  width:100%;
  max-height:220px;
  border-radius:14px;
  background:#000;
  margin:6px 0;
}
.badge{color:#3b82f6;font-size:12px}
</style>
</head>

<body>

<header>SAQIB</header>

<!-- LOGIN -->
<div id="login" class="page">
<input id="phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„">
<button onclick="sendCode()">Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯</button>
<div id="codeBox" class="hidden">
<input id="code" placeholder="Ú©Ø¯ ØªØ§ÛŒÛŒØ¯">
<button onclick="verify()">ØªØ§ÛŒÛŒØ¯</button>
</div>
</div>

<!-- PROFILE -->
<div id="profile" class="page hidden">
<input id="name" placeholder="Ù†Ø§Ù… Ùˆ ÙØ§Ù…ÛŒÙ„ÛŒ">
<input type="file" id="photo">
<button onclick="saveProfile()">Ø§Ø¯Ø§Ù…Ù‡</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<!-- STORIES -->
<div class="page story">
<div><img src="https://i.imgur.com/6VBx3io.png"><div>Ø´Ù…Ø§</div></div>
<div><img src="https://i.imgur.com/6VBx3io.png"><div>Ø¹Ù„ÛŒ</div></div>
<div><img src="https://i.imgur.com/6VBx3io.png"><div>Ø³Ø§Ø±Ø§</div></div>
</div>

<!-- USERS -->
<div id="users" class="page"></div>

<!-- CHAT -->
<div id="chat" class="page hidden">
<b id="chatName"></b>
<div>
<button onclick="startCall(true)">ğŸ“¹</button>
<button onclick="startCall(false)">ğŸ“</button>
</div>

<video id="localVideo" autoplay muted playsinline class="hidden"></video>
<video id="remoteVideo" autoplay playsinline class="hidden"></video>

<div id="messages"></div>
<div class="bottom">
<input id="msg" placeholder="Ù¾ÛŒØ§Ù…...">
<button onclick="sendMsg()">â¤</button>
</div>
</div>

</div>

<!-- SETTINGS -->
<div id="settings" class="page hidden">
<h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h3>
<p>ğŸ‘¤ Ú¯Ù„Ø¨Ø¯ÛŒÙ† Ø«Ø§Ù‚Ø¨ ØºÙˆØ± <span class="badge">âœ”ï¸</span></p>
<p>ğŸ“ ØªØºÛŒÛŒØ± Ø´Ù…Ø§Ø±Ù‡</p>
<p>ğŸ”’ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</p>
<p>â„¹ï¸ Ø¯Ø±Ø¨Ø§Ø±Ù‡ SAQIB Messenger</p>
<button onclick="logout()">Ø®Ø±ÙˆØ¬</button>
</div>

<nav id="nav" class="hidden">
<button onclick="show('users')" class="active">Ú†Øªâ€ŒÙ‡Ø§</button>
<button onclick="show('settings')">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
</nav>

<script>
let me={},current=null;

function sendCode(){
  if(phone.value.length<6)return alert("Ø´Ù…Ø§Ø±Ù‡ Ù†Ø§Ø¯Ø±Ø³Øª");
  codeBox.classList.remove("hidden");
}
function verify(){
  if(code.value!=="1234")return alert("Ú©Ø¯ Ù†Ø§Ø¯Ø±Ø³Øª");
  login.classList.add("hidden");
  profile.classList.remove("hidden");
}
function saveProfile(){
  me.name=name.value||"Ú©Ø§Ø±Ø¨Ø±";
  profile.classList.add("hidden");
  app.classList.remove("hidden");
  nav.classList.remove("hidden");
  loadUsers();
}
function loadUsers(){
  users.innerHTML="";
  ["Ø¹Ù„ÛŒ","Ø§Ø­Ù…Ø¯","Ø³Ø§Ø±Ø§"].forEach(u=>{
    let d=document.createElement("div");
    d.className="user";
    d.innerHTML=`<img src="https://i.imgur.com/6VBx3io.png">
    <div><div>${u}</div><div class="status">Ø¢Ù†Ù„Ø§ÛŒÙ†</div></div>`;
    d.onclick=()=>openChat(u);
    users.appendChild(d);
  });
}
function openChat(u){
  current=u;
  chatName.innerText=u;
  chat.classList.remove("hidden");
}
function sendMsg(){
  if(!msg.value)return;
  let d=document.createElement("div");
  d.className="msg me";
  d.innerText=msg.value;
  messages.appendChild(d);
  msg.value="";
}
function show(id){
  users.classList.add("hidden");
  chat.classList.add("hidden");
  settings.classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
}
function logout(){location.reload()}

/* CALL UI */
async function startCall(video){
  const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:video});
  localVideo.srcObject=stream;
  localVideo.classList.remove("hidden");
}
</script>

</body>
</html>
