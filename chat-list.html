
<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Saqib Market â€“ Chats</title>

<!-- Firebase compat -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#0e0e11;
  color:#fff;
  font-family:Arial, sans-serif;
}
header{
  padding:15px;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  font-size:20px;
  font-weight:bold;
}
#list{
  padding:10px;
}
.user{
  display:flex;
  align-items:center;
  padding:12px;
  border-bottom:1px solid #1f1f1f;
  cursor:pointer;
  transition:.2s;
}
.user:hover{
  background:#1b1b22;
}
.avatar{
  width:55px;
  height:55px;
  border-radius:50%;
  background:#333;
  margin-left:12px;
  position:relative;
  overflow:hidden;
}
.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.online{
  width:12px;
  height:12px;
  background:#2ecc71;
  border-radius:50%;
  position:absolute;
  bottom:4px;
  left:4px;
  border:2px solid #0e0e11;
}
.info{
  flex:1;
}
.name{
  font-size:16px;
  font-weight:bold;
}
.last{
  font-size:13px;
  color:#aaa;
  margin-top:4px;
}
.time{
  font-size:12px;
  color:#888;
}
.bottom{
  position:fixed;
  bottom:0;
  width:100%;
  background:#121218;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}
.bottom span{
  color:#aaa;
}
.bottom .active{
  color:#4da3ff;
}
</style>
</head>
<body>

<header>SAQIB MARKET</header>

<div id="list"></div>

<div class="bottom">
  <span class="active">Chats</span>
  <span>Groups</span>
  <span>Calls</span>
  <span>Profile</span>
</div>

<script>
/* ðŸ”¹ Firebase config */
firebase.initializeApp({
  apiKey: "AIzaSyAHJ_2UP6n4RyGcuWmfa1hJA_n8B1C5C2Q",
  authDomain: "saqibmarket.firebaseapp.com",
  databaseURL: "https://saqibmarket-default-rtdb.firebaseio.com",
  projectId: "saqibmarket"
});

const auth = firebase.auth();
const db   = firebase.database();
const list = document.getElementById("list");

/* ðŸ”¹ Ø¨Ø¹Ø¯ Ø§Ø² Ù„Ø§Ú¯ÛŒÙ† */
auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="index.html"; // ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
    return;
  }

  db.ref("users").on("value",snap=>{
    list.innerHTML="";
    snap.forEach(u=>{
      if(u.key === user.uid) return;

      const d = u.val();
      const div = document.createElement("div");
      div.className="user";
      div.innerHTML=`
        <div class="avatar">
          <img src="${d.photo || 'https://i.imgur.com/6VBx3io.png'}">
          <div class="online"></div>
        </div>
        <div class="info">
          <div class="name">${d.name || "User"}</div>
          <div class="last">Tap to chat</div>
        </div>
        <div class="time">Now</div>
      `;
      div.onclick=()=>alert("Ú†Øª Ø®ØµÙˆØµÛŒ â€“ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯");
      list.appendChild(div);
    });
  });
});
</script>

</body>
</html>
